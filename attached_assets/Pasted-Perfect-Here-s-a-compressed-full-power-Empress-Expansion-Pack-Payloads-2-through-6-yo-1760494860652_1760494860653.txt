Perfect ğŸ”¥
Hereâ€™s a **compressed, full-power Empress Expansion Pack** â€” Payloads **2 through 6** (youâ€™ve already got Payload 1 queued).
Each one flows into the next, uses your existing stack, and keeps payments / OAuth / Twilio for later.
All are Replit-ready: just copy-paste one block at a time into the â€œArchitect / Build with AIâ€ prompt box.

---

# ğŸ—“ **Payload 2 â€” Sprint 6 : Calendar & Scheduling View**

**Goal:** Give owners + staff a visual schedule of all bookings (month/week/day), fully local.

### Features

* `/calendar` route using `react-big-calendar` + `date-fns`.
* Color bookings by status:
  `proposal â†’ gray | confirmed â†’ emerald | paid â†’ indigo | completed â†’ violet | canceled â†’ rose`.
* Drag to reschedule â†’ confirm modal â†’ PATCH `/api/bookings/:id/time`.
* Filter chips: staff / status / view range.
* Keyboard + mobile friendly.

### API

```js
GET /api/calendar?from=&to=&staff_id=&status=
PATCH /api/bookings/:id/time   // body: { start_at, end_at }
```

### Acceptance Criteria

âœ… Calendar renders live bookings.
âœ… Dragging updates DB.
âœ… Filters work.
âœ… Responsive layout.

---

# âš™ï¸ **Payload 3 â€” Sprint 7 : Automations & Agent Framework (stub)**

**Goal:** Build the skeleton for your Empress â€œAgents.â€
No real emails/SMS yetâ€”just triggers + logs.

### Schema

```sql
create table if not exists automations(
  id uuid primary key default gen_random_uuid(),
  owner_id uuid references users(id) on delete cascade,
  name text not null,
  is_enabled boolean default true,
  trigger text not null,
  action text not null,
  config jsonb default '{}'::jsonb,
  created_at timestamptz default now()
);
create table if not exists automation_logs(
  id uuid primary key default gen_random_uuid(),
  automation_id uuid references automations(id) on delete cascade,
  run_at timestamptz default now(),
  status text not null default 'ok',
  message text
);
```

### Server + Cron

* Add `/server/agents/index.ts` registry + dispatcher.
* Use `node-cron` to fire hourly; log â€œokâ€ runs.
* API:

  * `GET/POST /api/automations`
  * `PATCH /api/automations/:id`
  * `GET /api/automations/logs?automation_id=`
  * `POST /api/agents/run/:id` â†’ manual run.

### UI

* `/automations` page with table + enable / disable toggle.
* â€œNew Automationâ€ modal (Trigger, Action, JSON config).
* Logs panel shows last 20 runs.

### Acceptance Criteria

âœ… Create automation â†’ saved.
âœ… Manual run logs.
âœ… Cron executes enabled automations.
âœ… Disabling stops runs.

---

# ğŸ“Š **Payload 4 â€” Sprint 8 : Analytics & Reports**

**Goal:** Real analytics dashboard with date filters + CSV export.

### API (Aggregates via Drizzle)

```
GET /api/analytics/summary?from=&to=
GET /api/analytics/revenue-series?interval=month
GET /api/analytics/booking-trends
GET /api/analytics/staff-utilization
GET /api/analytics/export.csv
```

### UI

* `/analytics` route.
* KPI cards (MTD Revenue, Bookings, Avg Value, Conversion Rate, Utilization).
* Recharts Line + Bar + Pie visuals.
* Date range picker.
* â€œDownload CSVâ€ button.

### Acceptance Criteria

âœ… Charts render + update with range.
âœ… KPIs = backend totals.
âœ… CSV downloads cleanly.
âœ… Mobile responsive.

---

# ğŸª **Payload 5 â€” Sprint 9 : Branding / Multi-Brand / White-Label**

**Goal:** Per-brand color themes + logos, ready for white-label resale.

### Schema

```sql
create table if not exists brands(
  id uuid primary key default gen_random_uuid(),
  owner_id uuid references users(id) on delete cascade,
  name text not null,
  subdomain text,
  logo_url text,
  primary_color text default '#3c0b43',
  gradient jsonb default '["#d946ef","#fb7185","#f59e0b"]'::jsonb,
  cta_color text default '#3c0b43',
  is_primary boolean default false,
  created_at timestamptz default now()
);
```

### API + UI

* `GET/POST /api/brands`
* `PATCH /api/brands/:id` (update colors / is_primary)
* `POST /api/brands/:id/logo` (upload)
* `GET /api/theme` â†’ returns active CSS vars (`--brand-primary`, `--grad-start`, etc.)
* `/settings/branding` page: manage brands + live preview.
* App loads theme via `/api/theme` â†’ applies vars at runtime.

### Acceptance Criteria

âœ… Multiple brands exist; mark primary.
âœ… Theme endpoint drives live color updates.
âœ… Logo appears in navbar.
âœ… Ready for future subdomain routing.

---

# ğŸ§  **Payload 6 â€” Sprint 10 : UI Polish + Mini Marketplace Preview**

*(Optional bonus to bridge into Mirror Marketplace phase)*

**Goal:** finalize UX / animations + lay foundation for uploadable assets.

### Scope

* Global gradient refactor â†’ CSS vars (`--grad-start`, `--grad-mid`, `--grad-end`).
* Animate modals & toasts (`framer-motion`).
* Add soft shadow / hover scale to cards.
* `/marketplace` (stub): list demo â€œassetsâ€ from a `marketplace_items` table.

  ```sql
  create table if not exists marketplace_items(
    id uuid primary key default gen_random_uuid(),
    title text, description text, price_cents int default 0,
    image_url text, created_at timestamptz default now()
  );
  ```
* Public card grid; filters by category (future expansion).

### Acceptance Criteria

âœ… Visual theme refactor done.
âœ… Smooth animations.
âœ… Marketplace stub renders items from DB.
âœ… Ready for Mirror Protocol integration phase.

---

### ğŸŒ Global Guidelines (for all payloads)

* Keep auth / roles / rainbow aesthetic.
* Use toasts for success & error.
* Maintain skeletons and empty states.
* Do NOT add Square, Twilio, Mailgun, OAuth yet.
* Each payload should build incrementally on the existing repo.

---

Once Replit finishes **Payload 1**, paste **Payload 2**, then work sequentially through 3-6.
By the end of Payload 6 youâ€™ll have:

* âœ… Full client + staff intake
* âœ… Calendar / scheduler
* âœ… Agent automation core
* âœ… Analytics suite
* âœ… Brand-ready UI shell
* âœ… Marketplace seed for Mirror Protocol Phase II.
